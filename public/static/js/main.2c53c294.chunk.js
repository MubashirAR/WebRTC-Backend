(this["webpackJsonpreact-webrtc"]=this["webpackJsonpreact-webrtc"]||[]).push([[0],{31:function(e,t,n){e.exports=n(66)},36:function(e,t,n){},38:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},39:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(28),o=n.n(c),i=(n(36),n(8)),s=n(1),u=n.n(s),l=n(2),d=n(3),p=(n(38),n(39),n(14)),m=n(11),f=n(9),v=n.n(f);v.a.defaults.withCredentials=!0;var h={"Content-Type":"application/json",crossDomain:!0,credentials:"cross-origin"},g={withCredentials:!0,credentials:"same-origin"},w=document.URL.split("/");w=w.length>2&&w[2].includes("localhost")?"":"https://mubashir-video-chat.herokuapp.com",w="/api";var b=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()(Object(i.a)({url:w+"/login",method:"POST",headers:h,data:JSON.stringify(t)},g));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response.data;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()(Object(i.a)({url:w+"/register",method:"POST",headers:h,data:JSON.stringify(t)},g));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response.data;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x={me:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()(Object(i.a)({url:w+"/me",method:"get",headers:h},g));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.log({error:e.t0}),e.t0.response.data;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),login:b,register:E};v.a.defaults.withCredentials=!0;var O={"Content-Type":"application/json",crossDomain:!0,credentials:"cross-origin"},y={withCredentials:!0,credentials:"same-origin"},C=document.URL.split("/");C=C.length>2&&C[2].includes("localhost")?"":"https://mubashir-video-chat.herokuapp.com",C="/api";var j={getConnections:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()(Object(i.a)({url:C+"/connection",method:"GET",headers:O},y));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0.response.data;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),addConnection:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connectionId,e.prev=1,e.next=4,v()(Object(i.a)({url:C+"/user/addConnection",method:"PUT",headers:O,data:JSON.stringify({connectionId:n})},y));case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.response.data;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),removeConnection:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connectionId,e.prev=1,e.next=4,v()(Object(i.a)({url:C+"/user/removeConnection",method:"PUT",headers:O,data:JSON.stringify({connectionId:n})},y));case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.response.data;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),searchUser:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({params:t}),e.prev=1,e.next=4,v()(Object(i.a)({url:C+"/user/search",method:"GET",headers:O,params:t},y));case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0.response.data;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},k=a.a.createContext({}),S=(n(57),function(){var e=Object(r.useContext)(k).data.loggedInUser,t=void 0===e?{}:e;return a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"welcome-msg"},"Welcome ",t.username),a.a.createElement("div",null,a.a.createElement("ul",null,t.username?a.a.createElement("a",{href:"/connect"},a.a.createElement("li",null,"Call")):a.a.createElement(r.Fragment,null,a.a.createElement("a",{href:"/login"},a.a.createElement("li",null,"Login")),a.a.createElement("a",{href:"/register"},a.a.createElement("li",null,"Register"))))))}),L=(n(58),function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],p=i[1],f=Object(r.useContext)(k),v=f.API,h=f.isLoggedIn,g=f.isCheckedLogin,w=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Auth.login(t);case 3:n=e.sent,alert(n.msg),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log({error:e.t0}),alert(e.t0.msg);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"login-container"},g?h?a.a.createElement(m.a,{to:"/connect"}):a.a.createElement(r.Fragment,null,a.a.createElement("h3",null,"Login"),a.a.createElement("div",null,a.a.createElement("input",{type:"text",placeholder:"Username",onChange:function(e){return c(e.target.value)},value:n}),a.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return p(e.target.value)},value:s})),a.a.createElement("button",{type:"button",onClick:function(e){return w({username:n,password:s})}},"Login")):"loading")}),U=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],p=i[1],m=Object(r.useState)(""),f=Object(d.a)(m,2),v=f[0],h=f[1],g=Object(r.useState)(""),w=Object(d.a)(g,2),b=w[0],E=w[1],x=Object(r.useContext)(k).API,O=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Auth.register(t);case 3:n=e.sent,alert(n.msg),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.msg);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("h3",null,"Register"),a.a.createElement("div",null,a.a.createElement("input",{type:"text",placeholder:"Username",onChange:function(e){return c(e.target.value)},value:n}),a.a.createElement("input",{type:"email",placeholder:"Email",onChange:function(e){return p(e.target.value)},value:s})),a.a.createElement("div",null,a.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)},value:v}),a.a.createElement("input",{type:"password",placeholder:"Repeat Password",onChange:function(e){return E(e.target.value)},value:b})),a.a.createElement("div",null,v===b?"Passwords match":"Password do not match"),a.a.createElement("button",{type:"button",onClick:function(e){return O({username:n,password:v,email:s})}},"Signup"))},P=(n(64),function(e){e.playVideoFromCamera;var t=e.isOnCall;return a.a.createElement("div",null,a.a.createElement("div",{className:t?"padding hidden":"padding"},a.a.createElement("select",{name:"",id:"availableCameras",placeholder:"Choose camera"})),a.a.createElement("div",{id:"caller-details"}),a.a.createElement("button",{className:t?"hidden":"",id:"answer"},"Answer"),a.a.createElement("div",{className:t?"":"hidden"},a.a.createElement("video",{id:"self-video",autoPlay:!0,playsInline:!0,controls:"false"}),a.a.createElement("video",{id:"other-video",autoPlay:!0,playsInline:!0,controls:"false"}),a.a.createElement("div",null,a.a.createElement("button",{id:"disconnect"},"Disconnect"))))}),I=function(e){var t=Object(r.useContext)(k),n=t.isCheckedLogin,c=t.isLoggedIn;return n?c?a.a.createElement(r.Fragment,null,e.children):a.a.createElement(m.a,{to:"/login"}):"loading"},T=function(e){var t=e.playVideoFromCamera,n=Object(r.useState)(!1),c=Object(d.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)([]),p=Object(d.a)(s,2),m=p[0],f=p[1],v=Object(r.useState)(""),h=Object(d.a)(v,2),g=h[0],w=h[1],b=Object(r.useState)(""),E=Object(d.a)(b,2),x=E[0],O=E[1],y=Object(r.useContext)(k),C=y.API;y.data.loggedInUser;Object(r.useEffect)((function(){return o||(i(!0),j()),function(){}}));var j=function(){try{C.User.getConnections().then((function(e){f(e)}))}catch(e){alert(e.msg||"Unexpected error while fetching your connections! Please try again")}},S=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.User.searchUser({searchKey:g});case 3:n=e.sent,O(n),console.log({user:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.msg||"Unexpected error occured!");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.User.addConnection({connectionId:x._id});case 3:return n=e.sent,e.next=6,j();case 6:alert(n.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.msg||"Unexpected error occured!");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.User.removeConnection({connectionId:t});case 3:return n=e.sent,e.next=6,j();case 6:alert(n.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.msg||"Unexpected error occured!");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("h3",null,"Connections"),a.a.createElement("h5",null,"Search"),a.a.createElement("input",{type:"text",placeholder:"Search username/email",onChange:function(e){return w(e.target.value)},value:g}),a.a.createElement("button",{type:"button",onClick:S},"Search"),x?a.a.createElement("div",null,a.a.createElement("hr",null),a.a.createElement("div",null,"Username: ",x.username," Email: ",x.email),m.find((function(e){return console.log(e._id,x._id),e._id===x._id}))?"Connected":a.a.createElement("button",{type:"button",onClick:L},"Add Connection"),a.a.createElement("hr",null)):null,a.a.createElement("hr",null),a.a.createElement("h5",null,"My Connections"),a.a.createElement("hr",null),m.map((function(e){return a.a.createElement(r.Fragment,{key:e._id},a.a.createElement("div",null,"Username: ",e.username," Email: ",e.email),a.a.createElement("button",{type:"button",onClick:function(n){return t(e.username)}},"Call"),a.a.createElement("button",{type:"button",onClick:function(t){return U(e._id)}},"Remove Connection"),a.a.createElement("hr",null))})))},q=(n(65),function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),i=Object(d.a)(o,2),s=i[0],p=i[1],m="",f=Object(r.useContext)(k).data.loggedInUser,v=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert("Couldn't get Camera. Please ensure camera permissions are granted for the browser and for the website.");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();function h(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:return n=e.sent,e.abrupt("return",n.filter((function(e){return e.kind===t})));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Couldn't get Camera List. Please ensure camera permissions are granted for the browser and for the website.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(e){try{var t=document.querySelector("select#availableCameras");t.innerHTML="",e.map((function(e){var t=document.createElement("option");return t.label=e.label,t.value=e.deviceId,t})).forEach((function(e){t.add(e)}))}catch(n){console.error(n),alert("Unexpected error occured!")}}function b(e,t,n){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(u.a.mark((function e(t,n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={audio:{echoCancellation:!0},video:{deviceId:t,width:{min:n},height:{min:r}}},e.next=4,v(a);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Couldn't get Camera List. Please ensure camera permissions are granted for the browser and for the website.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var x=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=t,e.prev=1,p(!0),n=document.querySelector("select#availableCameras").value,e.next=6,b(n,480,240);case 6:r=e.sent,document.querySelector("video#self-video").srcObject=r,O(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),alert("Unexpected error occured!");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();function O(e){return y.apply(this,arguments)}function y(){return(y=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.caller=!0,n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),document.querySelector("#disconnect").addEventListener("click",(function(){n.close()})),n.addStream(t),n.getSenders&&(r=n.getSenders()[0].dtmf,console.log({dtmfSender:r})),a="",n.addEventListener("icecandidate",(function(e){if(e.candidate){a=e.candidate.candidate;var t=m;window.socket.emit("new-ice-candidate",{candidate:e.candidate,to:t.value})}})),c=new MediaStream,document.querySelector("video#other-video").srcObject=c,n.addEventListener("track",(function(e){console.log({caller:{track:e}}),c.addTrack(e.track,c)})),n.addEventListener("iceconnectionstatechange",(function(){"failed"!==n.iceConnectionState&&"disconnected"!==n.iceConnectionState&&"closed"!==n.iceConnectionState||(p(!1),n.close())})),window.socket.on("iceCandidate",function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.candidate!==a){e.next=3;break}return console.log("same person"),e.abrupt("return");case 3:return e.next=5,n.addIceCandidate(t.candidate);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.socket.on("answer",function(){var e=Object(l.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.answer)){e.next=6;break}return console.log({answer:r}),a=new RTCSessionDescription(r),e.next=6,n.setRemoteDescription(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=18,n.createOffer();case 18:return o=e.sent,e.next=21,n.setLocalDescription(o);case 21:i=m,console.log({offer:o,connectWith:i}),window.socket.emit("offer",{offer:o,to:i}),n.addEventListener("icecandidateerror",(function(e){console.log({error:e}),alert("Something went wrong. Couldn't connect the call. Please try again.")})),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(0),console.log({error:e.t0}),alert("2Something went wrong. Couldn't connect the call. Please try again.");case 31:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function C(){return(C=Object(l.a)(u.a.mark((function e(){var t,n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.caller){e.next=3;break}return e.abrupt("return");case 3:return t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),document.querySelector("#disconnect").addEventListener("click",(function(){t.close()})),t.addEventListener("iceconnectionstatechange",(function(){"failed"!==t.iceConnectionState&&"disconnected"!==t.iceConnectionState&&"closed"!==t.iceConnectionState||(p(!1),t.close())})),n=document.querySelector("video#self-video"),r=document.querySelector("select#availableCameras").value,e.next=11,b(r,480,240);case 11:a=e.sent,t.addStream(a),c=new MediaStream,document.querySelector("video#other-video").srcObject=c,t.addEventListener("track",(function(e){console.log({answerer:{track:e}}),c.addTrack(e.track,c)})),"",window.socket.on("offer",function(){var e=Object(l.a)(u.a.mark((function e(r){var c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=r.offer,o=r.from,console.log({from:o,offer:c}),c&&(t.addEventListener("icecandidate",(function(e){if(e.candidate){e.candidate.candidate;document.querySelector("#other-username");window.socket.emit("new-ice-candidate",{candidate:e.candidate,to:o})}})),t.setRemoteDescription(new RTCSessionDescription(c)),document.querySelector("#caller-details").innerHTML=o+" calling",document.querySelector("#answer").addEventListener("click",Object(l.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),n.srcObject=a,e.next=4,t.createAnswer();case 4:return r=e.sent,e.next=7,t.setLocalDescription(r);case 7:document.querySelector("#other-username"),window.socket.emit("answer",{answer:r,to:o}),document.querySelector("#caller-details").innerHTML="";case 10:case"end":return e.stop()}}),e)})))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.addEventListener("icecandidateerror",(function(e){console.log({error:e}),alert("Something went wrong. Couldn't connect the call. Please try again.")})),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.log({error:e.t0}),alert("Something went wrong. Couldn't connect the call. Please try again.");case 26:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("videoinput");case 3:w(e.sent),navigator.mediaDevices.addEventListener("devicechange",(function(e){w(h("video"))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(console.log({loggedInUser:f}),f&&!n){c(!0);window.socket=window.io("https://mubashir-video-chat.herokuapp.com/"),window.socket.on("invalid_registration",(function(e){alert(e)})),window.socket.on("invalid_message",(function(e){})),window.socket.on("successful_registration",(function(e){alert(e)})),window.socket.emit("register",f.username),function(){j.apply(this,arguments)}(),function(){C.apply(this,arguments)}()}return function(){}})),a.a.createElement("div",{className:"connect-container"},a.a.createElement("div",{className:"sidebar"},a.a.createElement(T,{className:s?"hidden":"",playVideoFromCamera:x})),a.a.createElement("div",null,a.a.createElement(P,{playVideoFromCamera:x,isOnCall:s})))}),N=function(e){return a.a.createElement(p.a,null,a.a.createElement(m.d,null,a.a.createElement(m.b,{path:"/",component:S,exact:!0}),a.a.createElement(m.b,{path:"/login",component:L,exact:!0}),a.a.createElement(m.b,{path:"/register",component:U,exact:!0}),a.a.createElement(m.b,{path:"/call",exact:!0},a.a.createElement(I,null,a.a.createElement(P,null))),a.a.createElement(m.b,{path:"/connections",exact:!0},a.a.createElement(I,null,a.a.createElement(T,null))),a.a.createElement(m.b,{path:"/connect",exact:!0},a.a.createElement(I,null,a.a.createElement(q,null)))))};var D=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),s=Object(d.a)(o,2),p=s[0],m=s[1],f=Object(r.useState)(!1),v=Object(d.a)(f,2),h=v[0],g=v[1],w=Object(r.useState)({}),b=Object(d.a)(w,2),E=b[0],O=b[1],y=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.login.apply(x,r);case 2:return t=e.sent,e.next=5,x.me.apply(x,r);case 5:return n=e.sent,g(!0),O(n&&n.user||{}),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C={Auth:Object(i.a)({},x,{login:y}),User:j};return Object(r.useEffect)((function(){if(console.log("render.."),!n){console.log("checking"),c(!0);try{x.me().then((function(e){O(e&&e.user||{}),g(!0),m(!0)})).catch((function(e){m(!0)}))}catch(e){}}return function(){console.log("unmounting")}}),[1]),a.a.createElement(k.Provider,{value:{API:C,data:{loggedInUser:E},isCheckedLogin:p,isLoggedIn:h}},a.a.createElement("div",{className:"App"},a.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.2c53c294.chunk.js.map